import{_ as T}from"./chunks/circuit-breaker-diagram.Dq1YQUwR.js";import{D as f,r as B,V}from"./chunks/theme.CFNbPdFi.js";import{C as R,N as h}from"./chunks/circuit.y_FAFz-t.js";import{P as N}from"./chunks/progress-bar.DdOpSzUH.js";import{d as P,p as i,q as d,v as I,x as M,c as A,o as F,G as a,k as q,w as S,j as e,N as H,t as W,_ as U,C as z,a2 as L,a as j}from"./chunks/framework.DYiJ1WDi.js";const G={class:"sliding-time"},J={class:"content"},$={class:"form"},K={class:"row"},Q={class:"row"},X={class:"row"},Y={class:"row"},Z={class:"row"},ss={class:"row"},es={class:"row"},ts={class:"row"},is={class:"visualization"},as={class:"row state"},ls={class:"row"},ns=P({__name:"sliding-time",setup(_){const C=i(null),n=i(3e4),r=i(2),c=i(60),k=i(1e3),u=i(50),g=i(2),o=i(3e3),p=i(6e3),y=i(0),m=i(o.value),w=i(0),v=i(0),E=i("var(--vp-c-green-2)"),D=i(f.CLOSED),l=new B({slidingWindowSize:n.value,minimumNumberOfCalls:r.value,failureRateThreshold:c.value,slowCallDurationThreshold:k.value,slowCallRateThreshold:u.value,permittedNumberOfCallsInHalfOpenState:g.value,openStateDelay:o.value,halfOpenStateMaxDelay:p.value}),O=new V({options:{modules:[l]}});d([n],()=>{l.slidingWindowSize=n.value}),d([r],()=>{l.minimumNumberOfCalls=r.value}),d([c],()=>{l.failureRateThreshold=c.value}),d([k],()=>{l.slowCallDurationThreshold=k.value}),d([u],()=>{l.slowCallRateThreshold=u.value}),d([g],()=>{l.permittedNumberOfCallsInHalfOpenState=g.value}),d([o],()=>{l.openStateDelay=o.value}),d([p],()=>{l.halfOpenStateMaxDelay=p.value});function x(b){switch(clearInterval(v.value),y.value=0,D.value=b,b){case f.CLOSED:{E.value="var(--vp-c-green-2)";break}case f.HALF_OPENED:{m.value=p.value,E.value="var(--vp-c-yellow-2)";break}case f.OPENED:{m.value=o.value,E.value="var(--vp-c-red-2)";break}}w.value=Date.now(),D.value!==f.CLOSED?v.value=window.setInterval(()=>{y.value=Date.now()-w.value,y.value>=m.value&&clearInterval(v.value)},100):y.value=0}return I(()=>{l.on("state-changed",x)}),M(()=>{l.off("state-changed",x)}),(b,s)=>(F(),A("div",G,[a(R,{ref_key:"circuitRef",ref:C,circuit:q(O)},{default:S(()=>[e("div",J,[e("div",$,[e("div",K,[a(h,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=t=>n.value=t),label:"Window Size:"},null,8,["modelValue"])]),e("div",Q,[a(h,{modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=t=>r.value=t),label:"Minimum number of calls:"},null,8,["modelValue"])]),e("div",X,[a(h,{modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=t=>c.value=t),label:"Failure Rate Threshold (in %):"},null,8,["modelValue"])]),e("div",Y,[a(h,{modelValue:k.value,"onUpdate:modelValue":s[3]||(s[3]=t=>k.value=t),label:"Slow Call Duration Threshold (in ms):"},null,8,["modelValue"])]),e("div",Z,[a(h,{modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=t=>u.value=t),label:"Slow Call Rate Threshold (in %):"},null,8,["modelValue"])]),e("div",ss,[a(h,{modelValue:g.value,"onUpdate:modelValue":s[5]||(s[5]=t=>g.value=t),label:"Number of calls in Half Open State:"},null,8,["modelValue"])]),e("div",es,[a(h,{modelValue:o.value,"onUpdate:modelValue":s[6]||(s[6]=t=>o.value=t),label:"Delay to stay in Open State (in ms):"},null,8,["modelValue"])]),e("div",ts,[a(h,{modelValue:p.value,"onUpdate:modelValue":s[7]||(s[7]=t=>p.value=t),label:"Max Delay to stay in Half Open State (in ms):"},null,8,["modelValue"])])]),e("div",is,[e("div",as,[s[8]||(s[8]=e("label",null,"State:",-1)),e("div",{class:"bullet",style:H({backgroundColor:E.value})},null,4),e("span",null,W(D.value),1)]),e("div",ls,[a(N,{class:"internal",modelValue:y.value,color:E.value,max:m.value,label:"Breaker Duration:"},null,8,["modelValue","color","max"])])])])]),_:1},8,["circuit"])]))}}),hs=U(ns,[["__scopeId","data-v-f51f5ee3"]]),us=JSON.parse('{"title":"Sliding Time","description":"","frontmatter":{},"headers":[],"relativePath":"guide/api/modules/breaker/sliding-time.md","filePath":"guide/api/modules/breaker/sliding-time.md"}'),ds={name:"guide/api/modules/breaker/sliding-time.md"},gs=Object.assign(ds,{setup(_){return(C,n)=>{const r=z("ClientOnly");return F(),A("div",null,[n[0]||(n[0]=e("h1",{id:"sliding-time",tabindex:"-1"},[j("Sliding Time "),e("a",{class:"header-anchor",href:"#sliding-time","aria-label":'Permalink to "Sliding Time"'},"â€‹")],-1)),a(r,null,{default:S(()=>[a(hs)]),_:1}),n[1]||(n[1]=L("",15))])}}});export{us as __pageData,gs as default};
