import{F as N,X as J,V as $}from"./chunks/theme.CFNbPdFi.js";import{C as X,N as E,T as W}from"./chunks/circuit.y_FAFz-t.js";import{d as q,c as m,o as p,j as t,e as z,t as B,r as G,_ as O,p as l,q as u,v as Y,x as H,G as r,k as K,w as C,F as R,B as M,b as Q,C as Z,a2 as ee,a as A}from"./chunks/framework.DYiJ1WDi.js";import{P}from"./chunks/progress-bar.DdOpSzUH.js";const te="/mollitia/img/retry-linear-mode.png",ae="/mollitia/img/retry-exponential-mode.png",se="/mollitia/img/retry-jitter-mode-adjust0.1.png",ie="/mollitia/img/retry-jitter-mode-adjust0.5.png",le="/mollitia/img/retry-jitter-mode-adjust1.0.png",ne={class:"number"},re={key:0,class:"label"},oe=["value"],de=q({__name:"select",props:{modelValue:{default:""},label:{}},emits:["update:modelValue"],setup(w){const n=w;return(a,o)=>(p(),m("div",ne,[t("label",null,[n.label?(p(),m("span",re,B(n.label),1)):z("",!0),t("select",{value:n.modelValue,onInput:o[0]||(o[0]=h=>a.$emit("update:modelValue",h.target.value))},[G(a.$slots,"default",{},void 0,!0)],40,oe)])]))}}),pe=O(de,[["__scopeId","data-v-0900e5ef"]]),he={class:"timeout"},ce={class:"content"},ue={class:"form"},me={class:"row"},ye={class:"row"},ke={class:"row"},ge={class:"row"},fe=["value"],ve={class:"row"},Ee={class:"row"},xe={class:"row"},be={class:"visualization"},Ae={class:"row"},we={class:"progress"},Fe={class:"row"},_e=q({__name:"retry",setup(w){const n=l(null),a=l(2),o=l(1e3),h=l(2500),k=l(N.CONSTANT),g=l(2),f=l(!1),v=l(.1),y=l(0),d=l(new Array(a.value+1).fill({progress:0,color:"var(--vp-c-brand-3)"})),x=l(0),F=l(0),b=l(0),c=l(0),i=new J({attempts:a.value,interval:o.value,maxInterval:h.value,mode:k.value,factor:g.value,fastFirst:f.value,jitterAdjustment:v.value}),L=new $({options:{modules:[i]}});u([a],()=>{i.attempts=a.value,d.value=new Array(a.value+1).fill({progress:0,color:"var(--vp-c-brand-3)"})}),u([o],()=>{i.interval=o.value}),u([h],()=>{i.maxInterval=h.value}),u([k],()=>{i.mode=k.value}),u([g],()=>{i.factor=g.value}),u([f],()=>{i.fastFirst=f.value}),u([v],()=>{i.jitterAdjustment=v.value});function D(){b.value=Date.now(),c.value=window.setInterval(()=>{d.value[y.value]={progress:Date.now()-b.value,color:"var(--vp-c-brand-3)"},d.value[y.value].progress>=n.value.duration&&clearInterval(c.value)},100)}function I(){y.value=0,d.value=new Array(a.value+1).fill({progress:0,color:"var(--vp-c-brand-3)"}),D()}function T(){clearInterval(c.value),y.value++,D()}function j(U,e){n.value.logs.push(`Waiting for ${e}ms before next attempt...`),clearInterval(c.value),d.value[y.value]={progress:n.value.duration,color:"var(--vp-c-red-3)"},F.value=e,b.value=Date.now(),c.value=window.setInterval(()=>{x.value=Date.now()-b.value,x.value>=e&&clearInterval(c.value)},100)}function S(){clearInterval(c.value),d.value[y.value]={progress:n.value.duration,color:"var(--vp-c-red-3)"},x.value=F.value}return Y(()=>{i.on("execute",I),i.on("retry",T),i.on("delay-before-next-retry",j)}),H(()=>{i.off("execute",I),i.off("retry",T),i.off("delay-before-next-retry",j)}),(U,e)=>(p(),m("div",he,[r(X,{ref_key:"circuitRef",ref:n,circuit:K(L),duration:1e3,onFailure:S},{default:C(()=>[t("div",ce,[t("div",ue,[t("div",me,[r(E,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=s=>a.value=s),label:"Attempts:"},null,8,["modelValue"])]),t("div",ye,[r(E,{modelValue:o.value,"onUpdate:modelValue":e[1]||(e[1]=s=>o.value=s),label:"Interval (in ms):"},null,8,["modelValue"])]),t("div",ke,[r(E,{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=s=>h.value=s),label:"Max Interval (in ms):"},null,8,["modelValue"])]),t("div",ge,[r(pe,{modelValue:k.value,"onUpdate:modelValue":e[3]||(e[3]=s=>k.value=s),label:"Mode:"},{default:C(()=>[(p(!0),m(R,null,M(Object.values(N),s=>(p(),m("option",{key:s,value:s},B(s.toUpperCase()),9,fe))),128))]),_:1},8,["modelValue"])]),t("div",ve,[r(E,{modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=s=>g.value=s),label:"Factor:"},null,8,["modelValue"])]),t("div",Ee,[e[7]||(e[7]=t("span",null,"Fast First:",-1)),r(W,{class:"fast-first",modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=s=>f.value=s)},null,8,["modelValue"])]),t("div",xe,[r(E,{modelValue:v.value,"onUpdate:modelValue":e[6]||(e[6]=s=>v.value=s),step:.1,label:"Jitter Adjustment:"},null,8,["modelValue"])])]),t("div",be,[t("div",Ae,[e[8]||(e[8]=t("span",null,"Progress:",-1)),t("div",we,[(p(!0),m(R,null,M(a.value+1,(s,_)=>{var V;return p(),Q(P,{class:"attempt",key:_,modelValue:d.value[_].progress,color:d.value[_].color,max:(V=n.value)==null?void 0:V.duration},null,8,["modelValue","color","max"])}),128))])]),t("div",Fe,[r(P,{class:"internal",modelValue:x.value,max:F.value,label:"Interval:"},null,8,["modelValue","max"])])])])]),_:1},8,["circuit"])]))}}),Ce=O(_e,[["__scopeId","data-v-0fada32e"]]),Ne=JSON.parse('{"title":"Retry","description":"","frontmatter":{},"headers":[],"relativePath":"guide/api/modules/retry.md","filePath":"guide/api/modules/retry.md"}'),De={name:"guide/api/modules/retry.md"},Re=Object.assign(De,{setup(w){return(n,a)=>{const o=Z("ClientOnly");return p(),m("div",null,[a[0]||(a[0]=t("h1",{id:"retry",tabindex:"-1"},[A("Retry "),t("a",{class:"header-anchor",href:"#retry","aria-label":'Permalink to "Retry"'},"â€‹")],-1)),a[1]||(a[1]=t("p",null,[A("The "),t("code",null,"Retry"),A(" module allows you to "),t("strong",null,"retry"),A(" a function when it fails.")],-1)),r(o,null,{default:C(()=>[r(Ce)]),_:1}),a[2]||(a[2]=ee("",43))])}}});export{Ne as __pageData,Re as default};
