import{_ as B}from"./chunks/circuit-breaker-diagram.7c56a8fe.js";import{P as w,a as k,V as R,N as o,C as V}from"./chunks/circuit.96ad7feb.js";import{P as N}from"./chunks/progress-bar.d9b4ef32.js";import{d as I,h as t,x as i,j as P,z as H,o as A,c as S,H as l,w as O,k as s,N as M,t as W,l as q,p as z,m as U,_ as L,C as $,a as j,Q as J}from"./chunks/framework.b96a75df.js";import"./chunks/theme.a2ff1341.js";const Q=u=>(z("data-v-acaa3a2a"),u=u(),U(),u),G={class:"sliding-count"},K={class:"content"},X={class:"form"},Y={class:"row"},Z={class:"row"},ss={class:"row"},es={class:"row"},as={class:"row"},ts={class:"row"},ls={class:"row"},ns={class:"row"},os={class:"visualization"},is={class:"row state"},ps=Q(()=>s("label",null,"State:",-1)),rs={class:"row"},cs=I({__name:"sliding-count",setup(u){const F=t(null),c=t(4),p=t(2),y=t(60),h=t(1e3),E=t(50),f=t(2),r=t(3e3),d=t(6e3),m=t(0),C=t(r.value),x=t(0),v=t(0),g=t("var(--vp-c-green-2)"),b=t(w.CLOSED),n=new k({slidingWindowSize:c.value,minimumNumberOfCalls:p.value,failureRateThreshold:y.value,slowCallDurationThreshold:h.value,slowCallRateThreshold:E.value,permittedNumberOfCallsInHalfOpenState:f.value,openStateDelay:r.value,halfOpenStateMaxDelay:d.value}),T=new R({options:{modules:[n]}});i([c],()=>{n.slidingWindowSize=c.value}),i([p],()=>{n.minimumNumberOfCalls=p.value}),i([y],()=>{n.failureRateThreshold=y.value}),i([h],()=>{n.slowCallDurationThreshold=h.value}),i([E],()=>{n.slowCallRateThreshold=E.value}),i([f],()=>{n.permittedNumberOfCallsInHalfOpenState=f.value}),i([r],()=>{n.openStateDelay=r.value}),i([d],()=>{n.halfOpenStateMaxDelay=d.value});function _(D){switch(clearInterval(v.value),m.value=0,b.value=D,D){case w.CLOSED:{g.value="var(--vp-c-green-2)";break}case w.HALF_OPENED:{C.value=d.value,g.value="var(--vp-c-yellow-2)";break}case w.OPENED:{C.value=r.value,g.value="var(--vp-c-red-2)";break}}x.value=Date.now(),b.value!==w.CLOSED?v.value=window.setInterval(()=>{m.value=Date.now()-x.value,m.value>=C.value&&clearInterval(v.value)},100):m.value=0}return P(()=>{n.on("state-changed",_)}),H(()=>{n.off("state-changed",_)}),(D,e)=>(A(),S("div",G,[l(V,{ref_key:"circuitRef",ref:F,circuit:q(T)},{default:O(()=>[s("div",K,[s("div",X,[s("div",Y,[l(o,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),label:"Window Size:"},null,8,["modelValue"])]),s("div",Z,[l(o,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),label:"Minimum number of calls:"},null,8,["modelValue"])]),s("div",ss,[l(o,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=a=>y.value=a),label:"Failure Rate Threshold (in %):"},null,8,["modelValue"])]),s("div",es,[l(o,{modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=a=>h.value=a),label:"Slow Call Duration Threshold (in ms):"},null,8,["modelValue"])]),s("div",as,[l(o,{modelValue:E.value,"onUpdate:modelValue":e[4]||(e[4]=a=>E.value=a),label:"Slow Call Rate Threshold (in %):"},null,8,["modelValue"])]),s("div",ts,[l(o,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a),label:"Number of calls in Half Open State:"},null,8,["modelValue"])]),s("div",ls,[l(o,{modelValue:r.value,"onUpdate:modelValue":e[6]||(e[6]=a=>r.value=a),label:"Delay to stay in Open State (in ms):"},null,8,["modelValue"])]),s("div",ns,[l(o,{modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=a=>d.value=a),label:"Max Delay to stay in Half Open State (in ms):"},null,8,["modelValue"])])]),s("div",os,[s("div",is,[ps,s("div",{class:"bullet",style:M({backgroundColor:g.value})},null,4),s("span",null,W(b.value),1)]),s("div",rs,[l(N,{class:"internal",modelValue:m.value,color:g.value,max:C.value,label:"Breaker Duration:"},null,8,["modelValue","color","max"])])])])]),_:1},8,["circuit"])]))}});const ds=L(cs,[["__scopeId","data-v-acaa3a2a"]]),us=s("h1",{id:"sliding-count",tabindex:"-1"},[j("Sliding Count "),s("a",{class:"header-anchor",href:"#sliding-count","aria-label":'Permalink to "Sliding Count"'},"â€‹")],-1),ys=J("",15),Cs=JSON.parse('{"title":"Sliding Count","description":"","frontmatter":{},"headers":[],"relativePath":"guide/api/modules/breaker/sliding-count.md","filePath":"guide/api/modules/breaker/sliding-count.md"}'),hs={name:"guide/api/modules/breaker/sliding-count.md"},vs=Object.assign(hs,{setup(u){return(F,c)=>{const p=$("ClientOnly");return A(),S("div",null,[us,l(p,null,{default:O(()=>[l(ds)]),_:1}),ys])}}});export{Cs as __pageData,vs as default};
