import{_ as B}from"./chunks/circuit-breaker-diagram.Dq1YQUwR.js";import{D as f,a as T,V}from"./chunks/theme.CFNbPdFi.js";import{C as N,N as h}from"./chunks/circuit.y_FAFz-t.js";import{P as R}from"./chunks/progress-bar.DdOpSzUH.js";import{d as P,p as i,q as r,v as I,x as M,c as F,o as A,G as a,k as H,w as S,j as t,N as q,t as W,_ as U,C as z,a2 as L,a as j}from"./chunks/framework.DYiJ1WDi.js";const G={class:"sliding-count"},J={class:"content"},$={class:"form"},K={class:"row"},Q={class:"row"},X={class:"row"},Y={class:"row"},Z={class:"row"},ss={class:"row"},ts={class:"row"},es={class:"row"},is={class:"visualization"},as={class:"row state"},ls={class:"row"},ns=P({__name:"sliding-count",setup(_){const D=i(null),n=i(4),d=i(2),c=i(60),k=i(1e3),u=i(50),g=i(2),o=i(3e3),p=i(6e3),E=i(0),m=i(o.value),w=i(0),v=i(0),y=i("var(--vp-c-green-2)"),C=i(f.CLOSED),l=new T({slidingWindowSize:n.value,minimumNumberOfCalls:d.value,failureRateThreshold:c.value,slowCallDurationThreshold:k.value,slowCallRateThreshold:u.value,permittedNumberOfCallsInHalfOpenState:g.value,openStateDelay:o.value,halfOpenStateMaxDelay:p.value,prometheus:{name:"sliding_count_module"}}),O=new V({options:{modules:[l],prometheus:{name:"sliding_count_circuit"}}});r([n],()=>{l.slidingWindowSize=n.value}),r([d],()=>{l.minimumNumberOfCalls=d.value}),r([c],()=>{l.failureRateThreshold=c.value}),r([k],()=>{l.slowCallDurationThreshold=k.value}),r([u],()=>{l.slowCallRateThreshold=u.value}),r([g],()=>{l.permittedNumberOfCallsInHalfOpenState=g.value}),r([o],()=>{l.openStateDelay=o.value}),r([p],()=>{l.halfOpenStateMaxDelay=p.value});function x(b){switch(clearInterval(v.value),E.value=0,C.value=b,b){case f.CLOSED:{y.value="var(--vp-c-green-2)";break}case f.HALF_OPENED:{m.value=p.value,y.value="var(--vp-c-yellow-2)";break}case f.OPENED:{m.value=o.value,y.value="var(--vp-c-red-2)";break}}w.value=Date.now(),C.value!==f.CLOSED?v.value=window.setInterval(()=>{E.value=Date.now()-w.value,E.value>=m.value&&clearInterval(v.value)},100):E.value=0}return I(()=>{l.on("state-changed",x)}),M(()=>{l.off("state-changed",x)}),(b,s)=>(A(),F("div",G,[a(N,{ref_key:"circuitRef",ref:D,circuit:H(O)},{default:S(()=>[t("div",J,[t("div",$,[t("div",K,[a(h,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=e=>n.value=e),label:"Window Size:"},null,8,["modelValue"])]),t("div",Q,[a(h,{modelValue:d.value,"onUpdate:modelValue":s[1]||(s[1]=e=>d.value=e),label:"Minimum number of calls:"},null,8,["modelValue"])]),t("div",X,[a(h,{modelValue:c.value,"onUpdate:modelValue":s[2]||(s[2]=e=>c.value=e),label:"Failure Rate Threshold (in %):"},null,8,["modelValue"])]),t("div",Y,[a(h,{modelValue:k.value,"onUpdate:modelValue":s[3]||(s[3]=e=>k.value=e),label:"Slow Call Duration Threshold (in ms):"},null,8,["modelValue"])]),t("div",Z,[a(h,{modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=e=>u.value=e),label:"Slow Call Rate Threshold (in %):"},null,8,["modelValue"])]),t("div",ss,[a(h,{modelValue:g.value,"onUpdate:modelValue":s[5]||(s[5]=e=>g.value=e),label:"Number of calls in Half Open State:"},null,8,["modelValue"])]),t("div",ts,[a(h,{modelValue:o.value,"onUpdate:modelValue":s[6]||(s[6]=e=>o.value=e),label:"Delay to stay in Open State (in ms):"},null,8,["modelValue"])]),t("div",es,[a(h,{modelValue:p.value,"onUpdate:modelValue":s[7]||(s[7]=e=>p.value=e),label:"Max Delay to stay in Half Open State (in ms):"},null,8,["modelValue"])])]),t("div",is,[t("div",as,[s[8]||(s[8]=t("label",null,"State:",-1)),t("div",{class:"bullet",style:q({backgroundColor:y.value})},null,4),t("span",null,W(C.value),1)]),t("div",ls,[a(R,{class:"internal",modelValue:E.value,color:y.value,max:m.value,label:"Breaker Duration:"},null,8,["modelValue","color","max"])])])])]),_:1},8,["circuit"])]))}}),hs=U(ns,[["__scopeId","data-v-e97ac7b4"]]),us=JSON.parse('{"title":"Sliding Count","description":"","frontmatter":{},"headers":[],"relativePath":"guide/api/modules/breaker/sliding-count.md","filePath":"guide/api/modules/breaker/sliding-count.md"}'),rs={name:"guide/api/modules/breaker/sliding-count.md"},gs=Object.assign(rs,{setup(_){return(D,n)=>{const d=z("ClientOnly");return A(),F("div",null,[n[0]||(n[0]=t("h1",{id:"sliding-count",tabindex:"-1"},[j("Sliding Count "),t("a",{class:"header-anchor",href:"#sliding-count","aria-label":'Permalink to "Sliding Count"'},"â€‹")],-1)),a(d,null,{default:S(()=>[a(hs)]),_:1}),n[1]||(n[1]=L("",15))])}}});export{us as __pageData,gs as default};
