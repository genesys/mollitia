import{_ as R}from"./chunks/circuit-breaker-diagram.7c56a8fe.js";import{P as w,r as B,V as k,N as o,C as I}from"./chunks/circuit.96ad7feb.js";import{P as V}from"./chunks/progress-bar.d9b4ef32.js";import{d as N,h as t,x as i,j as P,z as M,o as _,c as S,H as l,w as T,k as s,N as H,t as W,l as q,p as z,m as U,_ as L,C as $,a as j,Q as J}from"./chunks/framework.b96a75df.js";import"./chunks/theme.a2ff1341.js";const Q=u=>(z("data-v-f51f5ee3"),u=u(),U(),u),G={class:"sliding-time"},K={class:"content"},X={class:"form"},Y={class:"row"},Z={class:"row"},ss={class:"row"},es={class:"row"},as={class:"row"},ts={class:"row"},ls={class:"row"},ns={class:"row"},os={class:"visualization"},is={class:"row state"},ps=Q(()=>s("label",null,"State:",-1)),rs={class:"row"},cs=N({__name:"sliding-time",setup(u){const x=t(null),c=t(3e4),p=t(2),y=t(60),h=t(1e3),E=t(50),f=t(2),r=t(3e3),d=t(6e3),m=t(0),v=t(r.value),F=t(0),D=t(0),g=t("var(--vp-c-green-2)"),C=t(w.CLOSED),n=new B({slidingWindowSize:c.value,minimumNumberOfCalls:p.value,failureRateThreshold:y.value,slowCallDurationThreshold:h.value,slowCallRateThreshold:E.value,permittedNumberOfCallsInHalfOpenState:f.value,openStateDelay:r.value,halfOpenStateMaxDelay:d.value}),O=new k({options:{modules:[n]}});i([c],()=>{n.slidingWindowSize=c.value}),i([p],()=>{n.minimumNumberOfCalls=p.value}),i([y],()=>{n.failureRateThreshold=y.value}),i([h],()=>{n.slowCallDurationThreshold=h.value}),i([E],()=>{n.slowCallRateThreshold=E.value}),i([f],()=>{n.permittedNumberOfCallsInHalfOpenState=f.value}),i([r],()=>{n.openStateDelay=r.value}),i([d],()=>{n.halfOpenStateMaxDelay=d.value});function A(b){switch(clearInterval(D.value),m.value=0,C.value=b,b){case w.CLOSED:{g.value="var(--vp-c-green-2)";break}case w.HALF_OPENED:{v.value=d.value,g.value="var(--vp-c-yellow-2)";break}case w.OPENED:{v.value=r.value,g.value="var(--vp-c-red-2)";break}}F.value=Date.now(),C.value!==w.CLOSED?D.value=window.setInterval(()=>{m.value=Date.now()-F.value,m.value>=v.value&&clearInterval(D.value)},100):m.value=0}return P(()=>{n.on("state-changed",A)}),M(()=>{n.off("state-changed",A)}),(b,e)=>(_(),S("div",G,[l(I,{ref_key:"circuitRef",ref:x,circuit:q(O)},{default:T(()=>[s("div",K,[s("div",X,[s("div",Y,[l(o,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=a=>c.value=a),label:"Window Size:"},null,8,["modelValue"])]),s("div",Z,[l(o,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),label:"Minimum number of calls:"},null,8,["modelValue"])]),s("div",ss,[l(o,{modelValue:y.value,"onUpdate:modelValue":e[2]||(e[2]=a=>y.value=a),label:"Failure Rate Threshold (in %):"},null,8,["modelValue"])]),s("div",es,[l(o,{modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=a=>h.value=a),label:"Slow Call Duration Threshold (in ms):"},null,8,["modelValue"])]),s("div",as,[l(o,{modelValue:E.value,"onUpdate:modelValue":e[4]||(e[4]=a=>E.value=a),label:"Slow Call Rate Threshold (in %):"},null,8,["modelValue"])]),s("div",ts,[l(o,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=a=>f.value=a),label:"Number of calls in Half Open State:"},null,8,["modelValue"])]),s("div",ls,[l(o,{modelValue:r.value,"onUpdate:modelValue":e[6]||(e[6]=a=>r.value=a),label:"Delay to stay in Open State (in ms):"},null,8,["modelValue"])]),s("div",ns,[l(o,{modelValue:d.value,"onUpdate:modelValue":e[7]||(e[7]=a=>d.value=a),label:"Max Delay to stay in Half Open State (in ms):"},null,8,["modelValue"])])]),s("div",os,[s("div",is,[ps,s("div",{class:"bullet",style:H({backgroundColor:g.value})},null,4),s("span",null,W(C.value),1)]),s("div",rs,[l(V,{class:"internal",modelValue:m.value,color:g.value,max:v.value,label:"Breaker Duration:"},null,8,["modelValue","color","max"])])])])]),_:1},8,["circuit"])]))}});const ds=L(cs,[["__scopeId","data-v-f51f5ee3"]]),us=s("h1",{id:"sliding-time",tabindex:"-1"},[j("Sliding Time "),s("a",{class:"header-anchor",href:"#sliding-time","aria-label":'Permalink to "Sliding Time"'},"â€‹")],-1),ys=J("",15),vs=JSON.parse('{"title":"Sliding Time","description":"","frontmatter":{},"headers":[],"relativePath":"guide/api/modules/breaker/sliding-time.md","filePath":"guide/api/modules/breaker/sliding-time.md"}'),hs={name:"guide/api/modules/breaker/sliding-time.md"},Ds=Object.assign(hs,{setup(u){return(x,c)=>{const p=$("ClientOnly");return _(),S("div",null,[us,l(p,null,{default:T(()=>[l(ds)]),_:1}),ys])}}});export{vs as __pageData,Ds as default};
